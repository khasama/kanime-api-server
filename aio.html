<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-0evHe/X+R7YkIZDRvuzKMRqM+OrBnVFBL6DOitfPri4tjfHxaWutUpFmBp4vmVor" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/croppie/2.6.5/croppie.min.css">

    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        a {
            text-decoration: none;
            color: #000;
        }
    </style>
</head>

<body>
    <script src="https://code.jquery.com/jquery-3.6.0.slim.min.js" 
    integrity="sha256-u7e5khyithlIdTpu22PHhENmPcRdFiHRjhAuHcs05RI=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/croppie/2.6.5/croppie.min.js"></script>
    <script src="https://cdn.ckeditor.com/ckeditor5/34.1.0/classic/ckeditor.js"></script>
    <div class="wrapper">

        <div class="accordion" id="accordionExample">
            <div class="accordion-item">
                <h2 class="accordion-header" id="Genres">
                    <button class="accordion-button" type="button" data-bs-toggle="collapse"
                        data-bs-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
                        Genres
                    </button>
                </h2>
                <div id="collapseOne" class="accordion-collapse collapse" aria-labelledby="Genres"
                    data-bs-parent="#accordionExample">
                    <div class="accordion-body">
                        <table class="table table-striped">
                            <thead>
                                <tr>
                                    <th scope="col">ID</th>
                                    <th scope="col">Genre</th>
                                    <th scope="col">Slug</th>
                                    <th scope="col">
                                        <a href="javascript:void(0)" data-bs-toggle='modal' data-bs-target='#createGenreModal'>
                                            <img src="https://img.icons8.com/material-outlined/24/000000/add.png"/>
                                        </a>
                                    </th>
                                </tr>
                            </thead>
                            <tbody id="genre-tb-list">
                            </tbody>
                        </table>

                        <div class="modal fade" id="updateGenreModal" tabindex="-1" 
                            aria-labelledby="exampleModalLabel" aria-hidden="true">
                            <div class="modal-dialog">
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <h5 class="modal-title" id="genre"></h5>
                                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                    </div>
                                    <div class="modal-body">
                                        <div>
                                            <label for="genre" class="form-label">Genre: </label>
                                            <input type="text" id="update-genre-input" class="form-control">
                                            <input type="hidden" id="update-idgenre-input">
                                        </div>
                                    </div>
                                    <div class="modal-footer">
                                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                                        <button type="button" class="btn btn-primary" onclick="updateGenre()" data-bs-dismiss="modal">Save</button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="modal fade" id="createGenreModal" tabindex="-1" 
                            aria-labelledby="exampleModalLabel" aria-hidden="true">
                            <div class="modal-dialog">
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <h5 class="modal-title">Create Genre</h5>
                                        <button type="button" class="btn-close" data-bs-dismiss="modal" 
                                        aria-label="Close"></button>
                                    </div>
                                    <div class="modal-body">
                                        <div>
                                            <label for="genre" class="form-label">Genre: </label>
                                            <input type="text" id="create-genre-input" class="form-control">
                                        </div>
                                    </div>
                                    <div class="modal-footer">
                                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                                        <button type="button" class="btn btn-success" onclick="createGenre()" data-bs-dismiss="modal">Create</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="accordion-item">
                <h2 class="accordion-header">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                        data-bs-target="#collapseSix" aria-expanded="false" aria-controls="collapseSix">
                        Status
                    </button>
                </h2>
                <div id="collapseSix" class="accordion-collapse collapse" aria-labelledby="headingSix"
                    data-bs-parent="#accordionExample">
                    <div class="accordion-body">
                        <table class="table table-striped">
                            <thead>
                                <tr>
                                    <th scope="col">ID</th>
                                    <th scope="col">Status</th>
                                    <th scope="col">Slug</th>
                                    <th scope="col">
                                        <a href="javascript:void(0)" data-bs-toggle='modal' data-bs-target='#createStatusModal'>
                                            <img src="https://img.icons8.com/material-outlined/24/000000/add.png"/>
                                        </a>
                                    </th>
                                </tr>
                            </thead>
                            <tbody id="status-tb-list">
                            </tbody>
                        </table>

                        <div class="modal fade" id="updateStatusModal" tabindex="-1" 
                            aria-labelledby="exampleModalLabel" aria-hidden="true">
                            <div class="modal-dialog">
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <h5 class="modal-title" id="status"></h5>
                                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                    </div>
                                    <div class="modal-body">
                                        <div>
                                            <label for="status" class="form-label">Status: </label>
                                            <input type="text" id="update-status-input" class="form-control">
                                            <input type="hidden" id="update-idstatus-input">
                                        </div>
                                    </div>
                                    <div class="modal-footer">
                                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                                        <button type="button" class="btn btn-primary" onclick="updateStatus()" data-bs-dismiss="modal">Save</button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="modal fade" id="createStatusModal" tabindex="-1" 
                            aria-labelledby="exampleModalLabel" aria-hidden="true">
                            <div class="modal-dialog">
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <h5 class="modal-title">Create Status</h5>
                                        <button type="button" class="btn-close" data-bs-dismiss="modal" 
                                        aria-label="Close"></button>
                                    </div>
                                    <div class="modal-body">
                                        <div>
                                            <label for="status" class="form-label">Status: </label>
                                            <input type="text" id="create-status-input" class="form-control">
                                        </div>
                                    </div>
                                    <div class="modal-footer">
                                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                                        <button type="button" class="btn btn-success" onclick="createStatus()" data-bs-dismiss="modal">Create</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="accordion-item">
                <h2 class="accordion-header">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                        data-bs-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
                        Series
                    </button>
                </h2>
                <div id="collapseTwo" class="accordion-collapse collapse" aria-labelledby="Series"
                    data-bs-parent="#accordionExample">
                    <div class="accordion-body">
                        <table class="table table-striped">
                            <thead>
                                <tr>
                                    <th scope="col">ID</th>
                                    <th scope="col">Series</th>
                                    <th scope="col">
                                        <a href="javascript:void(0)" data-bs-toggle='modal' data-bs-target='#createSeriesModal'>
                                            <img src="https://img.icons8.com/material-outlined/24/000000/add.png"/>
                                        </a>
                                    </th>
                                </tr>
                            </thead>
                            <tbody id="series-tb-list">
                            </tbody>
                        </table>

                        <div class="modal fade" id="updateSeriesModal" tabindex="-1" 
                            aria-labelledby="exampleModalLabel" aria-hidden="true">
                            <div class="modal-dialog">
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <h5 class="modal-title" id="series"></h5>
                                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                    </div>
                                    <div class="modal-body">
                                        <div>
                                            <label for="genre" class="form-label">Series: </label>
                                            <input type="text" id="update-series-input" class="form-control">
                                            <input type="hidden" id="update-idseries-input">
                                        </div>
                                    </div>
                                    <div class="modal-footer">
                                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                                        <button type="button" class="btn btn-primary" onclick="updateSeries()" data-bs-dismiss="modal">Save</button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="modal fade" id="createSeriesModal" tabindex="-1" 
                            aria-labelledby="exampleModalLabel" aria-hidden="true">
                            <div class="modal-dialog">
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <h5 class="modal-title">Create Series</h5>
                                        <button type="button" class="btn-close" data-bs-dismiss="modal" 
                                        aria-label="Close"></button>
                                    </div>
                                    <div class="modal-body">
                                        <div>
                                            <label for="series" class="form-label">Series: </label>
                                            <input type="text" id="create-series-input" class="form-control">
                                        </div>
                                    </div>
                                    <div class="modal-footer">
                                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                                        <button type="button" class="btn btn-success" onclick="createSeries()" data-bs-dismiss="modal">Create</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="accordion-item">
                <h2 class="accordion-header">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                        data-bs-target="#collapseYear" aria-expanded="false" aria-controls="collapseYear">
                        Year
                    </button>
                </h2>
                <div id="collapseYear" class="accordion-collapse collapse" aria-labelledby="headingThree"
                    data-bs-parent="#accordionExample">
                    <div class="accordion-body">
                        <table class="table table-striped">
                            <thead>
                                <tr>
                                    <th scope="col">ID</th>
                                    <th scope="col">Year</th>
                                    <th scope="col">
                                        <a href="javascript:void(0)" data-bs-toggle='modal' data-bs-target='#createYearModal'>
                                            <img src="https://img.icons8.com/material-outlined/24/000000/add.png"/>
                                        </a>
                                    </th>
                                </tr>
                            </thead>
                            <tbody id="year-tb-list">
                            </tbody>
                        </table>

                        <div class="modal fade" id="updateYearModal" tabindex="-1" 
                            aria-labelledby="exampleModalLabel" aria-hidden="true">
                            <div class="modal-dialog">
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <h5 class="modal-title" id="year"></h5>
                                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                    </div>
                                    <div class="modal-body">
                                        <div>
                                            <label for="genre" class="form-label">Year: </label>
                                            <input type="text" id="update-year-input" class="form-control">
                                            <input type="hidden" id="update-idyear-input">
                                        </div>
                                    </div>
                                    <div class="modal-footer">
                                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                                        <button type="button" class="btn btn-primary" onclick="updateYear()" data-bs-dismiss="modal">Save</button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="modal fade" id="createYearModal" tabindex="-1" 
                            aria-labelledby="exampleModalLabel" aria-hidden="true">
                            <div class="modal-dialog">
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <h5 class="modal-title">Create Year</h5>
                                        <button type="button" class="btn-close" data-bs-dismiss="modal" 
                                        aria-label="Close"></button>
                                    </div>
                                    <div class="modal-body">
                                        <div>
                                            <label for="year" class="form-label">Year: </label>
                                            <input type="text" id="create-year-input" class="form-control">
                                        </div>
                                    </div>
                                    <div class="modal-footer">
                                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                                        <button type="button" class="btn btn-success" onclick="createYear()" data-bs-dismiss="modal">Create</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="accordion-item">
                <h2 class="accordion-header" id="Servers">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                        data-bs-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
                        Servers
                    </button>
                </h2>
                <div id="collapseThree" class="accordion-collapse collapse" aria-labelledby="Servers"
                    data-bs-parent="#accordionExample">
                    <div class="accordion-body">
                        <table class="table table-striped">
                            <thead>
                                <tr>
                                    <th scope="col">ID</th>
                                    <th scope="col">Server</th>
                                    <th scope="col">Server description</th>
                                    <th scope="col">
                                        <a href="javascript:void(0)" data-bs-toggle='modal' data-bs-target='#createServerModal'>
                                            <img src="https://img.icons8.com/material-outlined/24/000000/add.png"/>
                                        </a>
                                    </th>
                                </tr>
                            </thead>
                            <tbody id="server-tb-list">
                            </tbody>
                        </table>

                        <div class="modal fade" id="updateServerModal" tabindex="-1" 
                            aria-labelledby="exampleModalLabel" aria-hidden="true">
                            <div class="modal-dialog">
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <h5 class="modal-title" id="server"></h5>
                                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                    </div>
                                    <div class="modal-body">
                                        <div>
                                            <label for="server" class="form-label">Server: </label>
                                            <input type="text" id="update-server-input" class="form-control">
                                            <label for="description" class="form-label">Server description: </label>
                                            <input type="text" id="update-description-input" class="form-control">
                                            <input type="hidden" id="update-idserver-input">
                                        </div>
                                    </div>
                                    <div class="modal-footer">
                                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                                        <button type="button" class="btn btn-primary" onclick="updateServer()" data-bs-dismiss="modal">Save</button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="modal fade" id="createServerModal" tabindex="-1" 
                            aria-labelledby="exampleModalLabel" aria-hidden="true">
                            <div class="modal-dialog">
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <h5 class="modal-title">Create Server</h5>
                                        <button type="button" class="btn-close" data-bs-dismiss="modal" 
                                        aria-label="Close"></button>
                                    </div>
                                    <div class="modal-body">
                                        <div>
                                            <label for="server" class="form-label">Server: </label>
                                            <input type="text" id="create-server-input" class="form-control">
                                            <label for="description" class="form-label">Description: </label>
                                            <input type="text" id="create-description-input" class="form-control">
                                        </div>
                                    </div>
                                    <div class="modal-footer">
                                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                                        <button type="button" class="btn btn-success" onclick="createServer()" data-bs-dismiss="modal">Create</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="accordion-item">
                <h2 class="accordion-header" id="Anime">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                        data-bs-target="#collapseFour" aria-expanded="false" aria-controls="collapseFour">
                        Anime
                    </button>
                </h2>
                <div id="collapseFour" class="accordion-collapse collapse show" aria-labelledby="Anime"
                    data-bs-parent="#accordionExample">
                    <div class="accordion-body">
                        <table class="table table-striped">
                            <thead>
                                <tr>
                                    <th scope="col">ID</th>
                                    <th scope="col">Name(SLug)</th>
                                    <th scope="col">Status</th>
                                    <th scope="col">Activate</th>
                                    <th scope="col">
                                        <a href="javascript:void(0)" data-bs-toggle='modal' data-bs-target='#createAnimeModal'>
                                            <img src="https://img.icons8.com/material-outlined/24/000000/add.png"/>
                                        </a>
                                    </th>
                                </tr>
                            </thead>
                            <tbody id="anime-tb-list">
                            </tbody>
                        </table>

                        <div class="modal fade" id="updateAnimeModal" tabindex="-1" 
                            aria-labelledby="exampleModalLabel" aria-hidden="true">
                            <div class="modal-dialog modal-lg" style="max-width: 80%">
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <h5 class="modal-title" id="anime"></h5>
                                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                    </div>
                                    <div class="modal-body">
                                        <div>
                                            <label for="name" class="form-label">Name: </label>
                                            <input type="text" id="update-name-input" class="form-control">
                                            <label for="oname" class="form-label">Other name: </label>
                                            <input type="text" id="update-oname-input" class="form-control">
                                            <label for="oname" class="form-label">Content: </label>
                                            <textarea id="update-editor">
                                                
                                            </textarea>
                                            <div class="mt-3">
                                                <label for="view" class="d-inline form-label ">View: </label>
                                                <input type="number" id="update-view-input" class=" d-inline w-50 form-control">
                                            </div>
                                            <div class="mt-3">
                                                <label for="like" class="form-label d-inline">Like: </label>
                                                <input type="number" id="update-liked-input" class="d-inline w-50 form-control">
                                            </div>
                                            <div class="mt-3">
                                                <label for="year" class="form-label d-inline">Year: </label>
                                                <select id="update-year-select" class="d-inline w-50 form-control">
                                                </select>
                                            </div>
                                            <div class="mt-3">
                                                <label for="mainserver" class="form-label d-inline">Main server: </label>
                                                <select id="update-mainserver-select" class="d-inline w-50 form-control">
                                                </select>
                                            </div>
                                            <div class="mt-3">
                                                <label for="status" class="form-label d-inline">Status: </label>
                                                <select id="update-status-select" class="d-inline w-50 form-control">
                                                </select>
                                            </div>
                                            <div class="mt-3 d-flex">
                                                <div class="w-50">
                                                    <label for="image" class="form-label d-inline">Image: </label>
                                                    <input type="file" class="d-inline w-75 form-control" id="update-image" accept="image/*">
                                                    <button class="d-inline btn btn-success" id="update-crop-img">Save</button>
                                                
                                                    <div class="d-flex mt-2">
                                                        <div style="margin-right: 55px;">
                                                            <b>Old</b> <br>
                                                            <img src="" id="old-img" width="250" alt="">
                                                        </div>
                                                        <div >
                                                            <b class="d-inline">New</b>  <br>
                                                            <img src="" id="update-crop-img-rs" width="250" alt="">
                                                        </div>
                                                    </div>
                                                </div>

                                                <div id="update-crop-img-area" style="width: 50% !important; display: none;">

                                                </div>
                                            </div>
                                            <div class="mt-3 d-flex">
                                                <div class="w-50">
                                                    <label for="background" class="form-label d-inline">Background: </label>
                                                    <input type="file" class="d-inline w-50 form-control" id="update-background" accept="image/*">
                                                    <button class="d-inline btn btn-success" id="update-crop-imgbg">Save</button>
                                                    <div>
                                                        <b>Old</b> <br>
                                                        <img src="" id="old-imgbg" width="500" alt="">
                                                    </div>
                                                    <div class="mt-2">
                                                        <b class="d-inline">New</b>  <br>
                                                        <img src="" id="update-crop-imgbg-rs" width="500" alt="">

                                                    </div>
                                                </div>
                                                
                                                <div id="update-crop-imgbg-area" style="width: 50% !important; display: none;">

                                                </div>
                                            </div>

                                            <input type="hidden" id="old-image">
                                            <input type="hidden" id="old-imagebg">
                                            <input type="hidden" id="update-idAnime-input">
                                        </div>
                                    </div>
                                    <div class="modal-footer">
                                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                                        <button type="button" class="btn btn-primary" onclick="updateAnime()">Save</button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="modal fade" id="createAnimeModal" tabindex="-1" 
                            aria-labelledby="exampleModalLabel" aria-hidden="true">
                            <div class="modal-dialog" style="max-width: 80%;">
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <h5 class="modal-title">Create Server</h5>
                                        <button type="button" class="btn-close" data-bs-dismiss="modal" 
                                        aria-label="Close"></button>
                                    </div>
                                    <div class="modal-body">
                                        <div>
                                            <label for="name" class="form-label">Name: </label>
                                            <input type="text" id="create-name-input" class="form-control">
                                            <label for="oname" class="form-label">Other name: </label>
                                            <input type="text" id="create-oname-input" class="form-control">
                                            <label for="oname" class="form-label">Content: </label>
                                            <textarea id="create-editor">
                                            </textarea>
                                            <div class="mt-3">
                                                <label for="year" class="form-label d-inline">Year: </label>
                                                <select id="create-year-select" class="d-inline w-50 form-control">
                                                </select>
                                            </div>
                                            <div class="mt-3 d-flex">
                                                <div class="w-50">
                                                    <label for="image" class="form-label d-inline">Image: </label>
                                                    <input type="file" class="d-inline w-75 form-control" id="create-image" accept="image/*">
                                                    <button class="d-inline btn btn-success" id="create-crop-img">Save</button>
                                                    <div class="mt-2">
                                                        <b class="d-inline">Image</b>  <br>
                                                        <img id="create-crop-img-rs" width="250"></img>
                                                    </div>
                                                </div>

                                                <div id="create-crop-img-area" style="width: 50% !important; display: none;">

                                                </div>
                                            </div>
                                            <div class="mt-3 d-flex">
                                                <div class="w-50">
                                                    <label for="background" class="form-label d-inline">Background: </label>
                                                    <input type="file" class="d-inline w-50 form-control" id="create-background" accept="image/*">
                                                    <button class="d-inline btn btn-success" id="create-crop-imgbg">Save</button>
                                                    <div class="mt-2">
                                                        <b class="d-inline">New</b>  <br>
                                                        <img id="create-crop-imgbg-rs" width="500"></img>

                                                    </div>
                                                </div>
                                                
                                                <div id="create-crop-imgbg-area" style="width: 50% !important; display: none;">

                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="modal-footer">
                                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                                        <button type="button" class="btn btn-success" onclick="createAnime()">Create</button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="modal fade" id="episodeModal" tabindex="-1" 
                            aria-labelledby="exampleModalLabel" aria-hidden="true">
                            <div class="modal-dialog" style="max-width: 80%;">
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <h5 class="modal-title">Episode</h5>
                                        <button type="button" class="btn-close" data-bs-dismiss="modal" 
                                        aria-label="Close"></button>
                                    </div>
                                    <div class="modal-body">
                                        <div class="d-flex">
                                            <div style="width: 10%; text-align: center;">
                                                <h4>List ep</h4>
                                                <hr>
                                                <div class="d-flex p-1" style="flex-direction: column; height: 550px; overflow-y: scroll;" id="list-eps">
                                                    
                                                </div>
                                                <button data-bs-target='#addEpisodeModal' data-bs-toggle='modal' class="w-100 mt-2 btn btn-warning">
                                                    <img src="https://img.icons8.com/ios/30/000000/plus--v1.png"/>
                                                </button>
                                            </div>
                                            <div style="width: 90%;">
                                                <div style="text-align: center;">
                                                    <h4 id="name-anime"></h4>
                                                    <hr>
                                                </div>
                                                <div id="episode-info" style="height: 550px; display: none;">
                                                    <div style="background-color: #3d3d3d; width: 60%;">
                                                        <iframe frameborder="0" allowfullscreen id="player" width="100%" height="70%">
                                                        </iframe>
                                                        <hr>
                                                        <div id="list-sever-ep" class="p-2">
                                                        </div>
                                                    </div>
                                                    <div style="width: 40%;">
                                                        <div class="p-2">
                                                            <h5 class="text-center">Update</h5>
                                                            <div class="mt-3">
                                                                <label for="episode" class="d-inline form-label ">Episode: </label>
                                                                <input type="text" id="ep-input" class="d-inline w-75 form-control" disabled>
                                                            </div>
                                                            <div class="mt-3">
                                                                <label for="server" class="d-inline form-label ">Server: </label>
                                                                <input type="text" id="serverlink-input" class=" d-inline w-75 form-control" disabled>
                                                            </div>
                                                            <label for="link" class="form-label">Link: </label>
                                                            <input type="text" id="update-link-input" class="form-control">
                                                            <input type="hidden" id="update-idep-input" class="form-control">
                                                            <div class="mt-3 text-center">
                                                                <button class="d-inline btn btn-secondary" id="update-link" onclick="updateLink()">Update</button>
                                                                <button class="d-inline btn btn-danger" id="delete-link"  onclick="deleteLink()">Delete</button>
                                                            </div>
                                                            <hr class="m-2">
                                                            <div>
                                                                <h5 class="text-center">Add</h5>
                                                                <div class="mt-3">
                                                                    <label for="server" class="d-inline form-label ">Server: </label>
                                                                    <select id="add-serverlink-select" class="d-inline w-75 form-control"></select>
                                                                </div>
                                                                <label for="link" class="form-label">Link: </label>
                                                                <input type="text" id="add-link-input" class="form-control">
                                                                <button class="mt-2 btn btn-success" onclick="addLink()">Add</button>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="modal fade" id="addEpisodeModal" tabindex="-1" 
                            aria-labelledby="exampleModalLabel" aria-hidden="true">
                            <div class="modal-dialog">
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <h5 class="modal-title">Add Episode</h5>
                                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                    </div>
                                    <div class="modal-body">
                                        <div>
                                            <label for="ep" class="form-label">Episode: </label>
                                            <input type="text" id="add-ep-input" class="form-control">
                                            <label for="genre" class="form-label">Link: </label>
                                            <input type="text" id="add-eplink-input" class="form-control">
                                        </div>
                                    </div>
                                    <div class="modal-footer">
                                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                                        <button type="button" class="btn btn-primary" onclick="addEpisode()">Add</button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="modal fade" id="animeGenreModal" tabindex="-1" 
                            aria-labelledby="exampleModalLabel" aria-hidden="true">
                            <div class="modal-dialog" style="max-width: 50%;">
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <h5 class="modal-title">Genres: <span id="an"></span></h5>
                                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                    </div>
                                    <div class="modal-body">
                                        <div>
                                            <div id="list-genre-anime" class="d-flex align-content-start flex-wrap">
                                                
                                            </div>
                                            <hr>
                                            <div>
                                                <table class="table table-striped">
                                                    <thead>
                                                        <tr>
                                                            <th scope="col">ID</th>
                                                            <th scope="col">Genre</th>
                                                            <th scope="col">
                                                                <a href="javascript:void(0)">
                                                                    <img src="https://img.icons8.com/external-tanah-basah-glyph-tanah-basah/20/000000/external-setting-essentials-pack-tanah-basah-glyph-tanah-basah.png"/>
                                                                </a>
                                                            </th>
                                                        </tr>
                                                    </thead>
                                                    <tbody id="genre-tb-list-b">

                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
            </div>
            <div class="accordion-item">
                <h2 class="accordion-header">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                        data-bs-target="#collapseFive" aria-expanded="false" aria-controls="collapseFive">
                        Slide
                    </button>
                </h2>
                <div id="collapseFive" class="accordion-collapse collapse" aria-labelledby="headingThree"
                    data-bs-parent="#accordionExample">
                    <div class="accordion-body">
                        <strong>This is the third item's accordion body.</strong> It is hidden by default, until the
                        collapse plugin adds the appropriate classes that we use to style each element. These classes
                        control the overall appearance, as well as the showing and hiding via CSS transitions. You can
                        modify any of this with custom CSS or overriding our default variables. It's also worth noting
                        that just about any HTML can go within the <code>.accordion-body</code>, though the transition
                        does limit overflow.
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-pprn3073KE6tl6bjs2QrFaJGz5/SUsLqktiwsUTF55Jfv3qYSDhgCecCxMW52nD2"
        crossorigin="anonymous">
    </script>

    <script>
        let updateEditor;
        ClassicEditor
        .create(document.querySelector( '#create-editor' ))
        .catch(error => {
            console.error(error);
        });
        ClassicEditor.create(document.querySelector('#update-editor'))
        .then(editor => {
            updateEditor = editor;
        });



        const eleImage = document.getElementById('update-image');
        const eleImageBG = document.getElementById('update-background');
        let elImg = document.getElementById('update-crop-img-area');
        let elImgBg = document.getElementById('update-crop-imgbg-area');
        let imgCrop = new Croppie(elImg, {
            viewport: {width: 270, height: 350 },
            boundary: { width: 400, height: 400 }
        });
        let imgCropBg = new Croppie(elImgBg, {
            viewport: {width: 550, height: 300 },
            boundary: { width: 600, height: 600 }
        });
        eleImage.onchange = function() {
            elImg.style.display = "block";
            const path = URL.createObjectURL(this.files[0]);
            imgCrop.bind({
                url: path
            });
            document.querySelector("#update-crop-img").addEventListener('click', () => {
                imgCrop.result({type: 'canvas', format: 'webp', size: 'viewport'}).then(rs => {
                    document.getElementById("update-crop-img-rs").setAttribute("src", rs);
                });
            }, false);
        };
        eleImageBG.onchange = function() {
            elImgBg.style.display = "block";
            const path = URL.createObjectURL(this.files[0]);
            imgCropBg.bind({
                url: path
            });
            document.querySelector("#update-crop-imgbg").addEventListener('click', () => {
                imgCropBg.result({type: 'canvas', format: 'webp', size: 'viewport'}).then(rs => {
                    document.getElementById("update-crop-imgbg-rs").setAttribute("src", rs);
                });
            }, false);
        };
    

        const eleNewImage = document.getElementById('create-image');
        const eleNewImageBG = document.getElementById('create-background');
        let elNewImg = document.getElementById('create-crop-img-area');
        let elNewImgBg = document.getElementById('create-crop-imgbg-area');
        let imgNewCrop = new Croppie(elNewImg, {
            viewport: {width: 270, height: 350 },
            boundary: { width: 400, height: 400 }
        });
        let imgNewCropBg = new Croppie(elNewImgBg, {
            viewport: {width: 550, height: 300 },
            boundary: { width: 600, height: 600 }
        });
        eleNewImage.onchange = function() {
            elNewImg.style.display = "block";
            const path = URL.createObjectURL(this.files[0]);
            imgNewCrop.bind({
                url: path
            });
            document.querySelector("#create-crop-img").addEventListener('click', () => {
                imgNewCrop.result({type: 'canvas', format: 'webp', size: 'viewport'}).then(rs => {
                    document.getElementById("create-crop-img-rs").setAttribute("src", rs);
                });
            }, false);            
        };
        eleNewImageBG.onchange = function() {
            elNewImgBg.style.display = "block";
            const path = URL.createObjectURL(this.files[0]);
            imgNewCropBg.bind({
                url: path
            });
            document.querySelector("#create-crop-imgbg").addEventListener('click', () => {
                imgNewCropBg.result({type: 'canvas', format: 'webp', size: 'viewport'}).then(rs => {
                    document.getElementById("create-crop-imgbg-rs").setAttribute("src", rs);
                })
            }, false);
            
        };
    
    </script>

    <script>
        getGenre();
        function getGenre(){
            fetch('http://localhost:3456/api/v1/genre/all')
            .then(response => response.json())
            .then(data => {
                const genres = data.data;
                const genreTb = document.getElementById("genre-tb-list");
                const genreTbb = document.getElementById("genre-tb-list-b");
                genreTb.innerHTML = '';
                genreTbb.innerHTML = '';
                genres.forEach(ele => {
                    genreTb.insertAdjacentHTML('beforeend', `
                        <tr>
                            <td scope="row">${ele.idGenre}</td>    
                            <td>${ele.Genre}</td>
                            <td>${ele.GenreSlug}</td>
                            <td>
                                <a href='javascript:void(0)' class='btn btn-info' data-infor='${JSON.stringify(ele)}'
                                onclick="setDataGenre(this)" data-bs-toggle='modal' data-bs-target='#updateGenreModal'>
                                    <img src="https://img.icons8.com/ios-glyphs/30/000000/edit--v1.png"/>
                                </a>
                                <a href="javascript:void(0)" class="btn btn-danger" data-id="${ele.idGenre}" 
                                onclick="deleteGenre(this)">
                                    <img src="https://img.icons8.com/material-rounded/24/000000/filled-trash.png"/>
                                </a>
                            </td>
                        </tr>
                        `
                    );
                    genreTbb.insertAdjacentHTML('beforeend', `
                        <tr>
                            <td scope="row">${ele.idGenre}</td>    
                            <td>${ele.Genre}</td>
                            <td>
                                <a href="javascript:void(0)" class="btn btn-secondary" data-id="${ele.idGenre}" 
                                onclick="addAnimeGenre(this)">
                                    <img src="https://img.icons8.com/external-simple-solid-edt.graphics/30/000000/external-Plus-add-and-remove-simple-solid-edt.graphics.png"/>
                                </a>
                            </td>
                        </tr>
                        `
                    );
                });
            });
        }
        
        function setDataGenre(ele){
            const data = JSON.parse(ele.getAttribute("data-infor"));
            document.getElementById("genre").innerText = data.Genre;
            document.getElementById("update-genre-input").value = data.Genre;
            document.getElementById("update-idgenre-input").value = data.idGenre;
        }
        
        function updateGenre(){
            const genre = document.getElementById("update-genre-input").value.trim();
            const id = document.getElementById("update-idgenre-input").value.trim();
            if (genre) {
                fetch(`http://localhost:3456/api/v1/genre/update/${id}`, {
                    method: 'PUT',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({genre})
                })
                .then(response => response.json())
                .then(result => {
                    if(result.message == "Success"){
                        alert(result.message);
                        getGenre();
                    }else{
                        alert(result.error);
                    }
                })
                .catch(error => {
                    console.error('Error:', error);
                });
            } else {
                alert("Not emty");
            }
        }
    
        function createGenre(){
            const genre = document.getElementById("create-genre-input").value.trim();
            if (genre) {
                fetch('http://localhost:3456/api/v1/genre/', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({genre})
                })
                .then(response => response.json())
                .then(result => {
                    if(result.message == "Failed"){
                        alert(result.error);
                    }else{
                        alert(result.message);
                        getGenre();
                    }
                })
                .catch(error => {
                    console.error('Error:', error);
                });
            } else {
                alert("Not emty");
            }
        }
        
        function deleteGenre(ele){
            if (confirm("Delete this ???")) {
                const id = ele.getAttribute("data-id");
                fetch(`http://localhost:3456/api/v1/genre/delete/${id}`, {
                    method: 'DELETE'
                })
                .then(response => response.json())
                .then(result => {
                    if(result.message == "Failed"){
                        alert(result.error);
                    }else{
                        alert(result.message);
                        getGenre();
                    }
                })
                .catch(error => {
                    console.error('Error:', error);
                });
            }
        }
    
    </script>

    <script>
        getStatus();
        function getStatus(){
            fetch('http://localhost:3456/api/v1/status/all')
            .then(response => response.json())
            .then(data => {
                const status = data.data;
                const statusTb = document.getElementById("status-tb-list");
                const statusSl = document.getElementById("update-status-select");
                statusTb.innerHTML = '';
                statusSl.innerHTML = '';
                status.forEach(ele => {
                    statusTb.insertAdjacentHTML('beforeend', `
                        <tr>
                            <td scope="row">${ele.idStatus}</td>    
                            <td>${ele.Status}</td>
                            <td>${ele.StatusSlug}</td>
                            <td>
                                <a href='javascript:void(0)' class='btn btn-info' data-infor='${JSON.stringify(ele)}'
                                onclick="setDataStatus(this)" data-bs-toggle='modal' data-bs-target='#updateStatusModal'>
                                    <img src="https://img.icons8.com/ios-glyphs/30/000000/edit--v1.png"/>
                                </a>
                                <a href="javascript:void(0)" class="btn btn-danger" data-id="${ele.idStatus}" 
                                onclick="deleteStatus(this)">
                                    <img src="https://img.icons8.com/material-rounded/24/000000/filled-trash.png"/>
                                </a>
                            </td>
                        </tr>
                        `
                    );
                    statusSl.insertAdjacentHTML('beforeend', `<option value="${ele.idStatus}">${ele.Status}</option>`);
                });
            });
        }
        
        function setDataStatus(ele){
            const data = JSON.parse(ele.getAttribute("data-infor"));
            document.getElementById("status").innerText = data.Status;
            document.getElementById("update-status-input").value = data.Status;
            document.getElementById("update-idstatus-input").value = data.idStatus;
        }
        
        function updateStatus(){
            const status = document.getElementById("update-status-input").value.trim();
            const id = document.getElementById("update-idstatus-input").value.trim();
            if (status) {
                fetch(`http://localhost:3456/api/v1/status/update/${id}`, {
                    method: 'PUT',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({status})
                })
                .then(response => response.json())
                .then(result => {
                    if(result.message == "Success"){
                        alert(result.message);
                        getStatus();
                    }else{
                        alert(result.error);
                    }
                })
                .catch(error => {
                    console.error('Error:', error);
                });
            } else {
                alert("Not emty");
            }
        }

        function createStatus(){
            const status = document.getElementById("create-status-input").value.trim();
            if (status) {
                fetch('http://localhost:3456/api/v1/status/', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({status})
                })
                .then(response => response.json())
                .then(result => {
                    if(result.message == "Failed"){
                        alert(result.error);
                    }else{
                        alert(result.message);
                        getStatus();
                    }
                })
                .catch(error => {
                    console.error('Error:', error);
                });
            } else {
                alert("Not emty");
            }
        }
        
        function deleteStatus(ele){
            if (confirm("Delete this ???")) {
                const id = ele.getAttribute("data-id");
                fetch(`http://localhost:3456/api/v1/status/delete/${id}`, {
                    method: 'DELETE'
                })
                .then(response => response.json())
                .then(result => {
                    if(result.message == "Failed"){
                        alert(result.error);
                    }else{
                        alert(result.message);
                        getStatus();
                    }
                })
                .catch(error => {
                    console.error('Error:', error);
                });
            }
        }

    </script>

    <script>
        getSeries();
        function getSeries(){
            fetch('http://localhost:3456/api/v1/series/all')
            .then(response => response.json())
            .then(data => {
                const series = data.data;
                const seriesTb = document.getElementById("series-tb-list");
                seriesTb.innerHTML = '';
                series.forEach(ele => {
                    seriesTb.insertAdjacentHTML('beforeend', `
                        <tr>
                            <td>${ele.idSeries}</td>    
                            <td>${ele.Series}</td>
                            <td>
                                <a href='javascript:void(0)' class='btn btn-info' data-infor='${JSON.stringify(ele)}'
                                onclick="setDataSeries(this)" data-bs-toggle='modal' data-bs-target='#updateSeriesModal'>
                                    <img src="https://img.icons8.com/ios-glyphs/30/000000/edit--v1.png"/>
                                </a>
                                <a href="javascript:void(0)" class="btn btn-danger" data-id="${ele.idSeries}" 
                                onclick="deleteSeries(this)">
                                    <img src="https://img.icons8.com/material-rounded/24/000000/filled-trash.png"/>
                                </a>
                            </td>
                        </tr>
                        `
                    );
                });
            });
        }
        
        function setDataSeries(ele){
            const data = JSON.parse(ele.getAttribute("data-infor"));
            document.getElementById("series").innerText = data.Series;
            document.getElementById("update-series-input").value = data.Series;
            document.getElementById("update-idseries-input").value = data.idSeries;
        }
        
        function updateSeries(){
            const series = document.getElementById("update-series-input").value.trim();
            const id = document.getElementById("update-idseries-input").value.trim();
            if(series){
                fetch(`http://localhost:3456/api/v1/series/update/${id}`, {
                    method: 'PUT',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({series})
                })
                .then(response => response.json())
                .then(result => {
                    if(result.message == "Success"){
                        alert(result.message);
                        getSeries();
                    }else{
                        alert(result.error);
                    }
                })
                .catch(error => {
                    console.error('Error:', error);
                });
            }else{
                alert("Not emty");
            }
        }

        function createSeries(){
            const series = document.getElementById("create-series-input").value.trim();
            if(series){
                fetch('http://localhost:3456/api/v1/series/', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({series})
                })
                .then(response => response.json())
                .then(result => {
                    if(result.message == "Failed"){
                        alert(result.error);
                    }else{
                        alert(result.message);
                        getSeries();
                    }
                })
                .catch(error => {
                    console.error('Error:', error);
                });
            }else{
                alert("Not emty");
            }
        }
        
        function deleteSeries(ele){
            if (confirm("Delete this ???")) {
                const id = ele.getAttribute("data-id");
                fetch(`http://localhost:3456/api/v1/series/delete/${id}`, {
                    method: 'DELETE'
                })
                .then(response => response.json())
                .then(result => {
                    if(result.message == "Failed"){
                        alert(result.error);
                    }else{
                        alert(result.message);
                        getSeries();
                    }
                })
                .catch(error => {
                    console.error('Error:', error);
                });
            }
        }

    </script>

    <script>
        getYear();
        function getYear(){
            fetch('http://localhost:3456/api/v1/year/all')
            .then(response => response.json())
            .then(data => {
                const year = data.data;
                const yearTb = document.getElementById("year-tb-list");
                const yearCSl = document.getElementById("create-year-select");
                const yearUSl = document.getElementById("update-year-select");
                yearTb.innerHTML = '';
                yearCSl.innerHTML = '';
                yearUSl.innerHTML = '';
                year.forEach(ele => {
                    yearTb.insertAdjacentHTML('beforeend', `
                        <tr>
                            <td>${ele.idYear}</td>    
                            <td>${ele.Year}</td>
                            <td>
                                <a href='javascript:void(0)' class='btn btn-info' data-infor='${JSON.stringify(ele)}'
                                onclick="setDataYear(this)" data-bs-toggle='modal' data-bs-target='#updateYearModal'>
                                    <img src="https://img.icons8.com/ios-glyphs/30/000000/edit--v1.png"/>
                                </a>
                                <a href="javascript:void(0)" class="btn btn-danger" data-id="${ele.idYear}" 
                                onclick="deleteYear(this)">
                                    <img src="https://img.icons8.com/material-rounded/24/000000/filled-trash.png"/>
                                </a>
                            </td>
                        </tr>
                        `
                    );
                    yearCSl.insertAdjacentHTML('beforeend', `<option value="${ele.idYear}">${ele.Year}</option>`);
                    yearUSl.insertAdjacentHTML('beforeend', `<option value="${ele.idYear}">${ele.Year}</option>`);
                });
            });
        }
        
        function setDataYear(ele){
            const data = JSON.parse(ele.getAttribute("data-infor"));
            document.getElementById("year").innerText = data.Year;
            document.getElementById("update-year-input").value = data.Year;
            document.getElementById("update-idyear-input").value = data.idYear;
        }
        
        function updateYear(){
            const year = document.getElementById("update-year-input").value.trim();
            const id = document.getElementById("update-idyear-input").value.trim();
            if(year){
                fetch(`http://localhost:3456/api/v1/year/update/${id}`, {
                    method: 'PUT',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({year})
                })
                .then(response => response.json())
                .then(result => {
                    if(result.message == "Success"){
                        alert(result.message);
                        getYear();
                    }else{
                        alert(result.error);
                    }
                })
                .catch(error => {
                    console.error('Error:', error);
                });
            }else{
                alert("Not emty");
            }
        }

        function createYear(){
            const year = document.getElementById("create-year-input").value.trim();
            if(year){
                fetch('http://localhost:3456/api/v1/year/', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({year})
                })
                .then(response => response.json())
                .then(result => {
                    if(result.message == "Failed"){
                        alert(result.error);
                    }else{
                        alert(result.message);
                        getYear();
                    }
                })
                .catch(error => {
                    console.error('Error:', error);
                });
            }else{
                alert("Not emty");
            }
        }
        
        function deleteYear(ele){
            if (confirm("Delete this ???")) {
                const id = ele.getAttribute("data-id");
                fetch(`http://localhost:3456/api/v1/year/delete/${id}`, {
                    method: 'DELETE'
                })
                .then(response => response.json())
                .then(result => {
                    if(result.message == "Failed"){
                        alert(result.error);
                    }else{
                        alert(result.message);
                        getYear();
                    }
                })
                .catch(error => {
                    console.error('Error:', error);
                });
            }
        }

    </script>

    <script>
        getServer();
        function getServer(){
            fetch('http://localhost:3456/api/v1/server/all')
            .then(response => response.json())
            .then(data => {
                const servers = data.data;
                const serverTb = document.getElementById("server-tb-list");
                const serverSl = document.getElementById("update-mainserver-select");
                serverTb.innerHTML = '';
                serverSl.innerHTML = '';
                servers.forEach(ele => {
                    serverTb.insertAdjacentHTML('beforeend', `
                        <tr>
                            <td>${ele.idServer}</td>    
                            <td>${ele.Server}</td>
                            <td>${ele.ServerDescription}</td>
                            <td>
                                <a href='javascript:void(0)' class='btn btn-info' data-infor='${JSON.stringify(ele)}'
                                onclick="setDataServer(this)" data-bs-toggle='modal' data-bs-target='#updateServerModal'>
                                    <img src="https://img.icons8.com/ios-glyphs/30/000000/edit--v1.png"/>
                                </a>
                                <a href="javascript:void(0)" class="btn btn-danger" data-id="${ele.idServer}" 
                                onclick="deleteServer(this)">
                                    <img src="https://img.icons8.com/material-rounded/24/000000/filled-trash.png"/>
                                </a>
                            </td>
                        </tr>
                        `
                    );

                    serverSl.insertAdjacentHTML('beforeend', `<option value="${ele.idServer}">${ele.Server}</option>`);
                });
            });
        }
        
        function setDataServer(ele){
            const data = JSON.parse(ele.getAttribute("data-infor"));
            document.getElementById("server").innerText = data.Server;
            document.getElementById("update-server-input").value = data.Server;
            document.getElementById("update-description-input").value = data.ServerDescription;
            document.getElementById("update-idserver-input").value = data.idServer;
        }
        
        function updateServer(){
            const server = document.getElementById("update-server-input").value.trim();
            const description = document.getElementById("update-description-input").value.trim();
            const id = document.getElementById("update-idserver-input").value.trim();
            if(server){
                fetch(`http://localhost:3456/api/v1/server/update/${id}`, {
                    method: 'PUT',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({server, description})
                })
                .then(response => response.json())
                .then(result => {
                    if(result.message == "Success"){
                        alert(result.message);
                        getServer();
                    }else{
                        alert(result.error);
                    }
                })
                .catch(error => {
                    console.error('Error:', error);
                });
            }else{
                alert("Not emty");
            }
        }

        function createServer(){
            const server = document.getElementById("create-server-input").value.trim();
            const description = document.getElementById("create-description-input").value.trim();
            if(server){
                fetch('http://localhost:3456/api/v1/server/', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({server, description})
                })
                .then(response => response.json())
                .then(result => {
                    if(result.message == "Failed"){
                        alert(result.error);
                    }else{
                        alert(result.message);
                        getServer();
                    }
                })
                .catch(error => {
                    console.error('Error:', error);
                });
            }else{
                alert("Not emty");
            }
        }
        
        function deleteServer(ele){
            if (confirm("Delete this ???")) {
                const id = ele.getAttribute("data-id");
                fetch(`http://localhost:3456/api/v1/server/delete/${id}`, {
                    method: 'DELETE'
                })
                .then(response => response.json())
                .then(result => {
                    if(result.message == "Failed"){
                        alert(result.error);
                    }else{
                        alert(result.message);
                        getServer();
                    }
                })
                .catch(error => {
                    console.error('Error:', error);
                });
            }
        }

    </script>

    <script>
        getAnime();
        function getAnime(){
            fetch('http://localhost:3456/api/v1/anime/all')
            .then(response => response.json())
            .then(data => {
                const anime = data.data;
                const animeTb = document.getElementById("anime-tb-list");
                animeTb.innerHTML = '';
                anime.forEach(ele => {
                    animeTb.insertAdjacentHTML('beforeend', `
                        <tr>
                            <td>${ele.idAnime}</td>    
                            <td>${ele.Name}</td>
                            <td>${ele.Status}</td>
                            <td>${ele.Activate}</td>
                            <td>
                                <a href='javascript:void(0)' class='btn btn-info' data-id='${ele.idAnime}' title="update"
                                onclick="setDataAnime(this)" data-bs-toggle='modal' data-bs-target='#updateAnimeModal'>
                                    <img src="https://img.icons8.com/ios-glyphs/30/000000/edit--v1.png"/>
                                </a>
                                <a href="javascript:void(0)" class="btn btn-primary" data-server="${ele.MainServer}" data-anime="${ele.idAnime}" 
                                data-name="${ele.Name}" onclick="getFullEpisode(this)" data-bs-target='#episodeModal' data-bs-toggle='modal' title="episode">
                                    <img src="https://img.icons8.com/ios-glyphs/30/000000/list--v1.png"/>
                                </a>
                                <a href='javascript:void(0)' class='btn btn-warning' data-id='${ele.idAnime}' title="genre"
                                onclick="showAnimeGenre(this)" data-bs-toggle='modal' data-bs-target='#animeGenreModal'>
                                    <img src="https://img.icons8.com/ios-filled/30/000000/category.png"/>
                                </a>
                                <a href='javascript:void(0)' class='btn btn-success' data-id='${ele.idAnime}' title="season"
                                onclick="checkAnimeSeason(this)">
                                    <img src="https://img.icons8.com/ios-glyphs/30/000000/movie--v1.png"/>
                                </a>
                                <a href="javascript:void(0)" class="btn btn-danger" data-id="${ele.idAnime}" 
                                onclick="deleteAnimeSoft(this)" title="delete">
                                    <img src="https://img.icons8.com/material-rounded/24/000000/filled-trash.png"/>
                                </a>
                            </td>
                        </tr>
                        `
                    );
                });
            });
        }
        
        function setDataAnime(ele){
            const id = ele.getAttribute("data-id");
            fetch(`http://localhost:3456/api/v1/anime/${id}`)
            .then(response => response.json())
            .then(result => {
                if(result.message == "Failed"){
                    alert(result.error);
                }else{
                    const anime = result.data;
                    document.getElementById("anime").innerText = anime.Name;
                    document.getElementById("update-name-input").value = anime.Name;
                    document.getElementById("update-oname-input").value = anime.OtherName;
                    updateEditor.setData(anime.Content);;

                    document.getElementById("update-view-input").value = anime.View;
                    document.getElementById("update-liked-input").value = anime.Liked;
                    
                    document.getElementById("old-img").setAttribute("src", `http://localhost:3456/api/v1/images/anime/${anime.Image}`);
                    document.getElementById("old-imgbg").setAttribute("src", `http://localhost:3456/api/v1/images/anime/${anime.ImageBG}`);

                    const y = document.getElementById("update-year-select").childNodes;
                    y.forEach(ele => {
                        ele.removeAttribute("selected");
                        if(ele.getAttribute("value") == anime.idYear){
                            ele.setAttribute("selected", true);
                        }
                    });

                    const ms = document.getElementById("update-mainserver-select").childNodes;
                    ms.forEach(ele => {
                        ele.removeAttribute("selected");
                        if(ele.getAttribute("value") == anime.MainServer){
                            ele.setAttribute("selected", true);
                        }
                    });

                    const stt = document.getElementById("update-status-select").childNodes;
                    stt.forEach(ele => {
                        ele.removeAttribute("selected");
                        if(ele.getAttribute("value") == anime.idStatus){
                            console.log(ele);
                            ele.setAttribute("selected", true);
                        }
                    });
                    
                    document.getElementById("old-image").value = anime.Image;
                    document.getElementById("old-imagebg").value = anime.ImageBG;
                    document.getElementById("update-idAnime-input").value = anime.idAnime;
                }
            })
            .catch(error => {
                console.log('Error:', error);
            });
            
        }
        
        function updateAnime(){
            const name = document.getElementById("update-name-input").value.trim();
            const othername = document.getElementById("update-oname-input").value.trim();
            const content = updateEditor.getData();
            const view = document.getElementById("update-view-input").value.trim();
            const liked = document.getElementById("update-liked-input").value.trim();
            const year =  document.getElementById("update-year-select").value;
            const mainserver= document.getElementById("update-mainserver-select").value;
            const status = document.getElementById("update-status-select").value;
            let image = document.getElementById("update-crop-img-rs").getAttribute("src");
            let imagebg = document.getElementById("update-crop-imgbg-rs").getAttribute("src");
            const oimg = document.getElementById("old-image").value;
            const oimgbg = document.getElementById("old-imagebg").value;
            const id = document.getElementById("update-idAnime-input").value;
            if(name && othername && content && view && liked && mainserver && status){
                let data = {
                    name,
                    othername,
                    content,
                    view,
                    liked,
                    year,
                    mainserver,
                    status,
                    oimg,
                    oimgbg
                }
                if(image){
                    image = image.replace(/^data:image\/webp;base64,/, "");
                    data.nimg = image;
                }
                if(imagebg){
                    imagebg = imagebg.replace(/^data:image\/webp;base64,/, "");
                    data.nimgbg = imagebg;
                }
                fetch(`http://localhost:3456/api/v1/anime/update/${id}`, {
                    method: 'PUT',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({data})
                })
                .then(response => response.json())
                .then(result => {
                    // const anime = result.data;
                    // console.log(anime);
                    alert(result.message);
                    getAnime();
                    $('#updateAnimeModal').modal('hide');
                })
                .catch(error => {
                    console.log('Error:', error);
                });
                
            }else{
                alert("Not emty");
            }
        }

        function createAnime(){
            const name = document.getElementById("create-name-input").value.trim();
            const othername = document.getElementById("create-oname-input").value.trim();
            const content = document.getElementById("create-editor").value.trim();
            const year = document.getElementById("create-year-select").value;
            let image = document.getElementById("create-crop-img-rs").getAttribute("src");
            let imagebg = document.getElementById("create-crop-imgbg-rs").getAttribute("src");
            if(name && othername && content && image && imagebg){
                image = image.replace(/^data:image\/webp;base64,/, "");
                imagebg = imagebg.replace(/^data:image\/webp;base64,/, "");
                fetch('http://localhost:3456/api/v1/anime/', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({name, othername, content, year, image, imagebg})
                })
                .then(response => response.json())
                .then(result => {
                    if(result.message == "Failed"){
                        alert(result.error);
                    }else{
                        alert(result.message);
                        getAnime();
                    }
                })
                .catch(error => {
                    console.error('Error:', error);
                });
            }else{
                alert("Not emty");
            }
        }
        
        function deleteSoftAnime(ele){
            if (confirm("Delete this ???")) {
                const id = ele.getAttribute("data-id");
                fetch(`http://localhost:3456/api/v1/anime/delete/${id}`, {
                    method: 'DELETE'
                })
                .then(response => response.json())
                .then(result => {
                    if(result.message == "Failed"){
                        alert(result.error);
                    }else{
                        alert(result.message);
                        getAnime();
                    }
                })
                .catch(error => {
                    console.error('Error:', error);
                });
            }
        }

    </script>

    <script>
        let Ep = {};
        let mainLink;
        let idAnime;
        function getFullEpisode(ele){
            document.getElementById("episode-info").style.display = "none";
            const anime = ele.getAttribute("data-anime");
            const server = ele.getAttribute("data-server");
            const name = ele.getAttribute("data-name");
            document.getElementById("name-anime").innerText = name;
            Ep.idAnime = anime;
            Ep.idServer = server;
            setListEp(anime, server);

        }

        function setListEp(anime, server){
            fetch(`http://localhost:3456/api/v1/episode/get-ep/${anime}-${server}`)
            .then(response => response.json())
            .then(result => {
                const eps = result.data;
                const listEp = document.getElementById("list-eps");
                listEp.innerHTML = '';
                eps.forEach(ele => {
                    listEp.insertAdjacentHTML('beforeend', `
                        <a href='javascript:void(0)' class='mb-1 btn btn-primary' data-info='${JSON.stringify(ele)}' onclick='getFullUrl(this)'>
                            ${ele.Episode}
                        </a>
                    `);
                });
            })
            .catch(err => {console.log(err)});
        }

        function getFullUrl(ele) {
            document.getElementById("episode-info").style.display = "flex";
            const data = JSON.parse(ele.getAttribute("data-info"));
            mainLink = data;
            setDataEpisode(mainLink);
            fetch('http://localhost:3456/api/v1/server/all')
            .then(response => response.json())
            .then(data => {
                const servers = data.data;
                const serverSl = document.getElementById("add-serverlink-select");
                serverSl.innerHTML = '';
                servers.forEach(ele => {
                    serverSl.insertAdjacentHTML('beforeend', `<option value="${ele.idServer}">${ele.Server}</option>`);
                });
            });
        }

        function getLink(ele){
            const id = ele.getAttribute("data-id");
            fetch(`http://localhost:3456/api/v1/episode/get-link/${id}`)
            .then(response => response.json())
            .then(result => {
                const info = result.data[0];
                setDataEpisode(info);
            })
            .catch(err => {console.log(err)});
        }

        function setDataEpisode(data){
            document.getElementById("player").setAttribute("src", data.Link);
            document.getElementById("ep-input").value = data.Episode;
            document.getElementById("serverlink-input").value = data.Server;
            document.getElementById("update-link-input").value = data.Link;
            document.getElementById("update-idep-input").value = data.idEpisode;

            fetch(`http://localhost:3456/api/v1/episode/get-furl/${data.idAnime}-${data.Episode}`)
            .then(response => response.json())
            .then(result => {
                const links = result.data;
                const listLink = document.getElementById("list-sever-ep");
                listLink.innerHTML = '';
                links.forEach(ele => {
                    listLink.insertAdjacentHTML('beforeend', `
                        <a href="javascript:void(0)" class="mr-1 btn btn-primary" data-id="${ele.idEpisode}" onclick="getLink(this)">${ele.Server}</a>
                    `);
                });
                
            })
            .catch(err => {console.log(err)});
        }

        function updateLink(){
            const link = document.getElementById("update-link-input").value;
            const id = document.getElementById("update-idep-input").value;
            if(link){
                fetch(`http://localhost:3456/api/v1/episode/update/${id}`, {
                    method: 'PUT',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({link})
                })
                .then(response => response.json())
                .then(result => {
                    if(result.message == "Failed"){
                        alert(result.error);
                    }else{
                        alert(result.message);
                        document.getElementById("update-link-input").value = link;
                        document.getElementById("player").setAttribute("src", link);
                    }
                })
                .catch(error => {
                    console.error('Error:', error);
                });
            }else{
                alert("Not emty !!!");
            }
        }

        function deleteLink(){
            if(confirm("Delete this ???")){
                const id = document.getElementById("update-idep-input").value;
                fetch(`http://localhost:3456/api/v1/episode/delete/${id}`, {
                    method: 'DELETE'
                })
                .then(response => response.json())
                .then(result => {
                    if(result.message == "Failed"){
                        alert(result.error);
                    }else{
                        alert(result.message);
                        if(mainLink.idEpisode == id){
                            document.getElementById("episode-info").style.display = "none";
                            setListEp(Ep.idAnime, Ep.idServer);
                        }
                        setDataEpisode(mainLink);
                        
                    }
                })
                .catch(error => {
                    console.error('Error:', error);
                });
                
            }
        }

        function addLink(){
            const episode = document.getElementById("ep-input").value;
            const link = document.getElementById("add-link-input");
            const server = document.getElementById("add-serverlink-select").value;
            if(link.value){
                fetch(`http://localhost:3456/api/v1/episode/add/`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({anime: Ep.idAnime, server, episode, link:link.value})
                })
                .then(response => response.json())
                .then(result => {
                    if(result.message == "Failed"){
                        alert(result.error);
                    }else{
                        alert(result.message);
                        link.value = '';
                        fetch(`http://localhost:3456/api/v1/episode/get-furl/${Ep.idAnime}-${episode}`)
                        .then(response => response.json())
                        .then(rs => {
                            const links = rs.data;
                            const listLink = document.getElementById("list-sever-ep");
                            listLink.innerHTML = '';
                            links.forEach(ele => {
                                listLink.insertAdjacentHTML('beforeend', `
                                    <a href="javascript:void(0)" class="mr-1 btn btn-primary" data-id="${ele.idEpisode}" onclick="getLink(this)">${ele.Server}</a>
                                `);
                            });
                            
                        })
                        .catch(err => {console.log(err)});
                    }
                })
                .catch(error => {
                    console.error('Error:', error);
                });
            }else{
                alert("Not emty");
            }
        }

        function addEpisode(){
            const episode = document.getElementById("add-ep-input");
            const link = document.getElementById("add-eplink-input");
            if(episode.value && link.value){
                fetch(`http://localhost:3456/api/v1/episode/add/`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        anime: Ep.idAnime, 
                        server: Ep.idServer, 
                        episode: episode.value, 
                        link: link.value
                    })
                })
                .then(response => response.json())
                .then(result => {
                    if(result.message == "Failed"){
                        alert(result.error);
                    }else{
                        alert(result.message);
                        episode.value = '';
                        link.value = '';
                        setListEp(Ep.idAnime, Ep.idServer);
                        $('#addEpisodeModal').modal('hide');
                        $('#episodeModal').modal('show');
                        
                    }
                })
                .catch(error => {
                    console.log('Error:', error);
                });
            }else{
                alert("Not emty !!!!");
            }
        }

        function showAnimeGenre(ele){
            const id = ele.getAttribute("data-id");
            idAnime = id;
            fetch(`http://localhost:3456/api/v1/anime/${id}`)
            .then(response => response.json())
            .then(result => {
                if(result.message == "Failed"){
                    alert(result.error);
                }else{
                    setDataAnimeGenre(result.data);
                }
            })
            .catch(error => {
                console.log('Error:', error);
            });
        }

        function addAnimeGenre(ele){
            const genre = ele.getAttribute("data-id");
            const anime = idAnime;
            fetch('http://localhost:3456/api/v1/anime/add-genre', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({anime, genre})
            })
            .then(response => response.json())
            .then(result => {
                if(result.message == "Failed"){
                    alert(result.error);
                }else{
                    alert(result.message);
                    setDataAnimeGenre(result.data);
                }
            })
            .catch(error => {
                console.error('Error:', error);
            });
        }

        function deleteAnimeGenre(ele){
            const idGA = ele.getAttribute("data-id");
            const idAnime = ele.getAttribute("data-anime");
            console.log(idGA, idAnime);
            fetch('http://localhost:3456/api/v1/anime/delete-genre', {
                method: 'DELETE',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({idGA, idAnime})
            })
            .then(response => response.json())
            .then(result => {
                alert(result.message);
                setDataAnimeGenre(result.data);
                
            })
            .catch(error => {
                console.error('Error:', error);
            });
        }

        function setDataAnimeGenre(data){
            const genres = data.Genre;
            const genreOfAnime = document.getElementById("list-genre-anime");
            document.getElementById("an").innerText = data.Name;
            genreOfAnime.innerHTML = '';
            genres.forEach(ele => {
                genreOfAnime.insertAdjacentHTML('beforeend', `
                    <a class="bg-success p-1" href="javascript:void(0)" style="margin:0 5px 5px 0; color: #fff;">
                        <span style="margin-right: 7px;">${ele.Genre}</span>
                        <button type="button" class="btn-close" aria-label="Close" 
                        data-anime="${data.idAnime}" data-id="${ele.idGA}" onclick="deleteAnimeGenre(this)"></button>
                    </a> 
                `);
            });
        }
    
        function checkAnimeSeason(ele){
            const id = ele.getAttribute("data-id");
            fetch(`http://localhost:3456/api/v1/season/${id}`)
            .then(response => response.json())
            .then(result => {
                if(result.message == "Failed"){
                    alert(result.error);
                }
            })
            .catch(err => {console.log(err)});
        }
    </script>

</body>

</html>